<h1> <%= @user.name %> </h1>

<div class="new-posts-link">

<% unless current_user.friends.map{|fr| fr.id}.include?(@user.id) %>
<% if !current_user.pending_friends.map{|fr| fr.id}.include?(@user.id) && !current_user.requested_friends.map{|fr| fr.id}.include?(@user.id) %>
<% if current_user.id != @user.id %>
<p><%= link_to "Be my friend", method: current_user.friend_request(@user) %> </p>
<%end%>
<%end%>
<%end%>


<% if current_user.id != @user.id %>
<p><%= link_to "Friend list", friends_list_path %></p>
<%end%>

<% if current_user.friends.map{|fr| fr.id}.include?(@user.id) %>
  <p><%= link_to 'Post on wall', new_profile_post_path(:user_profile_id => @user.id) %></p>
<% end %>

<% if current_user.id == @user.id %>
<p><%= link_to 'New post', new_post_path %></p>
<p><%= link_to "Friend Requests", friend_requests_path %></p>
<p><%= link_to "Friend list", friends_list_path %></p>
<% else %>
<% end %>
</div>
<div class="post">
<% @posts.each do |post| %>
  <p><%= post.message %></p>
  <p class="user-name">Posted by <strong><%= User.find_by(id: post.user_id).name %></strong> at <%=post.created_at.strftime("%k:%M on %B %e, %Y")%></p>
  <% unless post.created_at == post.updated_at %>
  <p>Post updated at <%=post.updated_at.strftime("%k:%M on %B %e, %Y")%></p>
  <%end%>

  <%  if current_user.present? && current_user.id == post.user_id %>
    <p><%= link_to("Edit this post", edit_post_path(post)) %></p>
    <p><%= link_to 'Delete post', post, :confirm => "Are you sure you want to delete this post? HMMM?!", :method => :delete %></p>
  <% else %>
  <% end %>
<% end %>
</div>

<div class="friends-posts">
  <h1> Friends Posts </h1>
  <% @profile_posts.each do |post| %>
    <div class="post profile-posts">
    <p><%= post.message %></p>
    <p class="user-name">Posted by <%=link_to User.find_by(id: post.user_id).name, user_path(User.find_by(id: post.user_id))%> at <%=post.created_at.strftime("%k:%M on %B %e, %Y")%></p>
    <% unless post.created_at == post.updated_at %>
    <p>Post updated at <%=post.updated_at.strftime("%k:%M on %B %e, %Y")%></p>
    <% end %>

    <%  if current_user.present? && current_user.id == post.user_id %>
      <p><%= link_to("Edit this post", edit_profile_post_path(post)) %></p>
      <p><%= link_to 'Delete post', post, :confirm => "Are you sure you want to delete this post? HMMM?!", :method => :delete %></p>
    <% else %>
    <% end %>
      </div>
  <% end %>
</div>
